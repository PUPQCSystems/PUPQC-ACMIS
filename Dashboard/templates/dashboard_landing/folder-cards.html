<div class="col-sm-12 col-lg-6" id="folder-load">

    <div class="card scrollable" style="height: 20rem">
        <div class="card-status-top bg-cyan"></div>
        <div class="card-header">
            <ul class="nav nav-tabs card-header-tabs rounded-3 bg-transparent" data-bs-toggle="tabs">
                <li class="nav-item">
                    <a href="#tabs-files" class="nav-link active" data-bs-toggle="tab">Files</a>
                </li>
                <li class="nav-item">
                    <a href="#tabs-folders" class="nav-link" data-bs-toggle="tab">Folder</a>
                </li>
            </ul>
        </div>

        <div class="card-body">
            <div class="tab-content">
                <div class="tab-pane fade active show" id="tabs-files">
                    {% if is_child %}
                        {% if record_id == pk %}
                        {% else %}
                            <a hx-get="{% url 'dashboards:load-folders' pk=parent_folder.parent_directory_id record_id=record_id %}" hx-target="#folder-load" hx-swap="outerHTML" class="btn btn-secondary btn-icon rounded-circle btn-ghost-secondary" aria-label="Back">
                                <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0" /><path d="M5 12l6 6" /><path d="M5 12l6 -6" /></svg>
                            </a>
                        {% endif %}
                        
                    {% endif %}
                    Files      
        
               
                   
                
                    
                        <div class="list-group list-group-flush list-group-hoverable scrollable">
                            {% for uploaded_record in uploaded_files %}
                                {% if is_child %}
                                    <div class="list-group-item">	
                                        <div class="row align-items-center">
                                            <div class="col">
                                                <a href="#" class="text-reset d-block" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#file-modal-{{ uploaded_record.id }}">{{ uploaded_record.file_name }}</a>
                                                <span class="text-muted small">
                                                    Uploaded by {{ uploaded_record.uploaded_by.first_name }} {{ uploaded_record.uploaded_by.last_name }}
                                                    on {{ uploaded_record.uploaded_at|date:"F j, Y"}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>

                                {% endif %}

                                {% if record.id == uploaded_record.parent_directory_id %}
                                    <div class="list-group-item">	
                                        <div class="row align-items-center">
                                            <div class="col">
                                                <a href="#" class="text-reset d-block" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#file-modal-{{ uploaded_record.id }}">{{ uploaded_record.file_name }}</a>
                                                <span class="text-muted small">
                                                    Uploaded by {{ uploaded_record.uploaded_by.first_name }} {{ uploaded_record.uploaded_by.last_name }}
                                                    on {{ uploaded_record.uploaded_at|date:"F j, Y"}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                    </div> 
                </div>

                <div class="tab-pane fade" id="tabs-folders">
                    {% if is_child %}
                        {% if record_id == pk %}
                        {% else %}
                            <a hx-get="{% url 'dashboards:load-folders' pk=parent_folder.parent_directory_id record_id=record_id %}" hx-target="#folder-load" hx-swap="outerHTML" class="btn btn-secondary btn-icon rounded-circle btn-ghost-secondary" aria-label="Back">
                                <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0" /><path d="M5 12l6 6" /><path d="M5 12l6 -6" /></svg>
                            </a>
                        {% endif %}
                        
                    {% endif %}
                    Folders      
    
                    <div class="row row-cards">
                        {% if records %}
                            <!-- For LOOP HERE-->
                            {% for folder in records %}

                                {% if is_child %}
                                    <div class="col-sm-6">
                                        <div class="card  rounded-4" onmouseover="addHoverClass(this)" onmouseout="removeHoverClass(this)">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-11 text-truncate"
                                                    data-bs-toggle="tooltip" 
                                                    data-bs-html="true" 
                                                    data-bs-placement="bottom"
                                                    title="{{  folder.name }}">
                    
                                                    {% if folder.is_submission_bin %}
                                                        <a class="text-reset" href="{% url 'accreditations:submission-bin-page' pk=folder.id %}">{{folder.name}}</a>
                                                    {% else %}
                                                        {% if is_child %}
                                                            <a class="text-reset" hx-get="{% url 'dashboards:load-folders' pk=folder.id record_id=record_id %}" hx-target="#folder-load" hx-swap="outerHTML">{{  folder.name }}</a>
                                            
                                                        {% else %}
                                                            <a class="text-reset" hx-get="{% url 'dashboards:load-folders' pk=folder.id record_id=record.id %}" hx-target="#folder-load" hx-swap="outerHTML">{{  folder.name }}</a>
                                                        {% endif %}
                                                    {% endif %}
                                                    </div>
                                                </div>
                    
                                                {% if folder.label %}
                                                    <div class="row">
                                                        <div class="text-truncate"
                                                            data-bs-toggle="tooltip" 
                                                            data-bs-html="true" 
                                                            data-bs-placement="bottom"
                                                            title="{{  folder.label }}">
                                                            <small class="card-text p-y-1 text-muted">{{  folder.label }}</small>
                                                        </div>
                                                    </div>
                                                {% endif %}
                    
                                                <br>
                                                {% if folder.is_submission_bin %}
                                                    <a class="text-reset" href="{% url 'accreditations:submission-bin-page' pk=folder.id %}">
                                                {% else %}
                                                    {% if is_child %}
                                                        <a class="text-decoration-none" hx-get="{% url 'dashboards:load-folders' pk=folder.id record_id=record_id%}" hx-target="#folder-load" hx-swap="outerHTML">
                                    
                                                    {% else %}
                                                        <a class="text-decoration-none" hx-get="{% url 'dashboards:load-folders' pk=folder.id record_id=record.id%}" hx-target="#folder-load" hx-swap="outerHTML">
                                    
                                                    {% endif %}
                                                {% endif %}
                                                    <div class="border  p-2 rounded-4 text-center">
                                                        {% if folder.is_submission_bin %}
                                                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="gray"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon folder-icon icon-tabler icons-tabler-outline icon-tabler-upload">
                                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                                                <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" />
                                                                <path d="M7 9l5 -5l5 5" />
                                                                <path d="M12 4l0 12" />
                                                            </svg>
                    
                                                        {% else %}
                                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="gray" class="icon folder-icon icon-tabler icons-tabler-filled icon-tabler-folder">
                                                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                                                <path d="M9 3a1 1 0 0 1 .608 .206l.1 .087l2.706 2.707h6.586a3 3 0 0 1 2.995 2.824l.005 .176v8a3 3 0 0 1 -2.824 2.995l-.176 .005h-14a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-11a3 3 0 0 1 2.824 -2.995l.176 -.005h4z" />
                                                            </svg>                                
                                                        
                                                        {% endif %}
                    
                                                        {% if folder.is_advance %}
                                                        <div>
                                                            <small class="card-text p-y-1 text-muted">Advance
                                                                {% if folder.can_be_reviewed %}
                                                                    (Reviewable)
                                                                {% endif %}
                                                            </small>
                                                        </div>
                            
                                                        {% elif folder.is_submission_bin %}
                                                        <div>
                                                            <small class="card-text p-y-1 text-muted">Submission Bin
                                                                {% if folder.can_be_reviewed %}
                                                                    (Reviewable)
                                                                {% endif %}
                                                            </small>
                                                        </div>
                    
                                                        {% else %}
                                                        <div>
                                                            <small class="card-text p-y-1 text-muted">
                                                                Simple
                                                            </small>
                                                        </div>
                                                        {% endif %}
                    
                                                        {% if folder.due_date %}
                                                            <div class="link-warning">
                                                                <!-- Download SVG icon from http://tabler-icons.io/i/calendar -->
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z"></path><path d="M16 3v4"></path><path d="M8 3v4"></path><path d="M4 11h16"></path><path d="M11 15h1"></path><path d="M12 15v3"></path></svg>
                                                                {{ folder.due_date|date:"M d, Y" }}
                                                            </div>
                                                        {% endif %}
                    
                    
                                                    {% if folder.can_be_reviewed %}
                                                        {% if folder.status == 'approve'%}
                                                            <span class="badge badge-outline text-green">Approved</span>
                                                        {% elif folder.status == 'rfr' %}
                                                            <span class="badge badge-outline text-red">Request for Resubmission</span>
                    
                                                        {% else %}
                                                            <span class="badge badge-outline text-cyan">For Review</span>
                                                        {% endif %}
                                                    {% endif %}
                    
                                                    <br>
                                                    </div>
                                                </a>
                                    
                    
                                                <div class="mt-4">
                                                    <div class="row">
                                                        {% if folder.has_progress_bar == True %}
                                                            <div class="col">
                                                                <div class="d-flex">
                                                                    <div class="subheader">Progress</div>
                                                                    <div class="ms-auto">
                                                                        <span class="text-green d-inline-flex align-items-center lh-1 subheader">
                                                                            {% if folder.progress_percentage == None %}
                                                                                0% Done
                                                                            {% else %}
                                                                                {{ folder.progress_percentage }}% Done
                                                                            {% endif %}
                                                                    </div>
                                                                </div>
                                                                <div class="progress progress-sm">
                                                                    <div class="progress-bar bg-primary" style="width: {{ folder.progress_percentage }}%" role="progressbar" aria-valuenow="{{ folder.progress_percentage }}" aria-valuemin="0" aria-valuemax="100" aria-label="{{ folder.progress_percentage }}% Complete">
                                                                        <span class="visually-hidden">{{ folder.progress_percentage }}% Complete</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        {% endif %}
                    
                                                        {% if perms.Accreditation.add_user_assigned_to_area and perms.Accreditation.view_user_assigned_to_area and perms.Accreditation.change_user_assigned_to_area and perms.Accreditation.delete_user_assigned_to_area %}
                                                            {% if folder.has_assign_button == True %}
                                                                <div class="col-auto text-muted">
                                                                    <button href="#" class="btn rounded-circle btn-icon btn-ghost-info" 
                                                                    data-bs-toggle="modal" 
                                                                    data-bs-target="#assign-modal-{{ folder.id }}"
                                                                    data-bs-toggle="tooltip" 
                                                                    data-bs-html="true" 
                                                                    data-bs-placement="bottom"
                                                                    title="Assign User">
                                                                    
                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                                                            <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
                                                                            <path d="M16 19h6" />
                                                                            <path d="M19 16v6" />
                                                                            <path d="M6 21v-2a4 4 0 0 1 4 -4h4" />
                                                                        </svg>
                                            
                                                                    </button>
                                                                </div>
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                    
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}

                                
                                {% if record.id == folder.parent_directory_id %}
                                    <div class="col-sm-6">
                                        <div class="card  rounded-4" onmouseover="addHoverClass(this)" onmouseout="removeHoverClass(this)">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-11 text-truncate"
                                                    data-bs-toggle="tooltip" 
                                                    data-bs-html="true" 
                                                    data-bs-placement="bottom"
                                                    title="{{  folder.name }}">
                    
                                                    {% if folder.is_submission_bin %}
                                                        <a class="text-reset" href="{% url 'accreditations:submission-bin-page' pk=folder.id %}">{{folder.name}}</a>
                                                    {% else %}
                                                        {% if is_child %}
                                                        <a class="text-reset" hx-get="{% url 'dashboards:load-folders' pk=folder.id record_id=record_id %}" hx-target="#folder-load" hx-swap="outerHTML">{{  folder.name }}</a>
                                            
                                                        {% else %}
                                                            <a class="text-reset" hx-get="{% url 'dashboards:load-folders' pk=folder.id record_id=record.id %}" hx-target="#folder-load" hx-swap="outerHTML">{{  folder.name }}</a>
                                                        {% endif %}

                                                    {% endif %}
                                                    </div>
                                                </div>
                    
                                                {% if folder.label %}
                                                    <div class="row">
                                                        <div class="text-truncate"
                                                            data-bs-toggle="tooltip" 
                                                            data-bs-html="true" 
                                                            data-bs-placement="bottom"
                                                            title="{{  folder.label }}">
                                                            <small class="card-text p-y-1 text-muted">{{  folder.label }}</small>
                                                        </div>
                                                    </div>
                                                {% endif %}
                    
                                                <br>
                                                {% if folder.is_submission_bin %}
                                                    <a class="text-reset" href="{% url 'accreditations:submission-bin-page' pk=folder.id %}">
                                                {% else %}
                                                        {% if is_child %}
                                                            <a class="text-decoration-none" hx-get="{% url 'dashboards:load-folders' pk=folder.id record_id=record_id%}" hx-target="#folder-load" hx-swap="outerHTML">
                                               
                                                        {% else %}
                                                            <a class="text-decoration-none" hx-get="{% url 'dashboards:load-folders' pk=folder.id record_id=record.id%}" hx-target="#folder-load" hx-swap="outerHTML">
                                               
                                                        {% endif %}

                                                {% endif %}
                                                    <div class="border  p-2 rounded-4 text-center">
                                                        {% if folder.is_submission_bin %}
                                                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="gray"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon folder-icon icon-tabler icons-tabler-outline icon-tabler-upload">
                                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                                                <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" />
                                                                <path d="M7 9l5 -5l5 5" />
                                                                <path d="M12 4l0 12" />
                                                            </svg>
                    
                                                        {% else %}
                                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="gray" class="icon folder-icon icon-tabler icons-tabler-filled icon-tabler-folder">
                                                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                                                <path d="M9 3a1 1 0 0 1 .608 .206l.1 .087l2.706 2.707h6.586a3 3 0 0 1 2.995 2.824l.005 .176v8a3 3 0 0 1 -2.824 2.995l-.176 .005h-14a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-11a3 3 0 0 1 2.824 -2.995l.176 -.005h4z" />
                                                            </svg>                                
                                                        
                                                        {% endif %}
                    
                                                        {% if folder.is_advance %}
                                                        <div>
                                                            <small class="card-text p-y-1 text-muted">Advance
                                                                {% if folder.can_be_reviewed %}
                                                                    (Reviewable)
                                                                {% endif %}
                                                            </small>
                                                        </div>
                            
                                                        {% elif folder.is_submission_bin %}
                                                        <div>
                                                            <small class="card-text p-y-1 text-muted">Submission Bin
                                                                {% if folder.can_be_reviewed %}
                                                                    (Reviewable)
                                                                {% endif %}
                                                            </small>
                                                        </div>
                    
                                                        {% else %}
                                                        <div>
                                                            <small class="card-text p-y-1 text-muted">
                                                                Simple
                                                            </small>
                                                        </div>
                                                        {% endif %}
                    
                                                        {% if folder.due_date %}
                                                            <div class="link-warning">
                                                                <!-- Download SVG icon from http://tabler-icons.io/i/calendar -->
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z"></path><path d="M16 3v4"></path><path d="M8 3v4"></path><path d="M4 11h16"></path><path d="M11 15h1"></path><path d="M12 15v3"></path></svg>
                                                                {{ folder.due_date|date:"M d, Y" }}
                                                            </div>
                                                        {% endif %}
                    
                    
                                                    {% if folder.can_be_reviewed %}
                                                        {% if folder.status == 'approve'%}
                                                            <span class="badge badge-outline text-green">Approved</span>
                                                        {% elif folder.status == 'rfr' %}
                                                            <span class="badge badge-outline text-red">Request for Resubmission</span>
                    
                                                        {% else %}
                                                            <span class="badge badge-outline text-cyan">For Review</span>
                                                        {% endif %}
                                                    {% endif %}
                    
                                                    <br>
                                                    </div>
                                                </a>
                                    
                    
                                                <div class="mt-4">
                                                    <div class="row">
                                                        {% if folder.has_progress_bar == True %}
                                                            <div class="col">
                                                                <div class="d-flex">
                                                                    <div class="subheader">Progress</div>
                                                                    <div class="ms-auto">
                                                                        <span class="text-green d-inline-flex align-items-center lh-1 subheader">
                                                                            {% if folder.progress_percentage == None %}
                                                                                0% Done
                                                                            {% else %}
                                                                                {{ folder.progress_percentage }}% Done
                                                                            {% endif %}
                                                                    </div>
                                                                </div>
                                                                <div class="progress progress-sm">
                                                                    <div class="progress-bar bg-primary" style="width: {{ folder.progress_percentage }}%" role="progressbar" aria-valuenow="{{ folder.progress_percentage }}" aria-valuemin="0" aria-valuemax="100" aria-label="{{ folder.progress_percentage }}% Complete">
                                                                        <span class="visually-hidden">{{ folder.progress_percentage }}% Complete</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        {% endif %}
                    
                                                        {% if perms.Accreditation.add_user_assigned_to_area and perms.Accreditation.view_user_assigned_to_area and perms.Accreditation.change_user_assigned_to_area and perms.Accreditation.delete_user_assigned_to_area %}
                                                            {% if folder.has_assign_button == True %}
                                                                <div class="col-auto text-muted">
                                                                    <button href="#" class="btn rounded-circle btn-icon btn-ghost-info" 
                                                                    data-bs-toggle="modal" 
                                                                    data-bs-target="#assign-modal-{{ folder.id }}"
                                                                    data-bs-toggle="tooltip" 
                                                                    data-bs-html="true" 
                                                                    data-bs-placement="bottom"
                                                                    title="Assign User">
                                                                    
                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                                                            <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
                                                                            <path d="M16 19h6" />
                                                                            <path d="M19 16v6" />
                                                                            <path d="M6 21v-2a4 4 0 0 1 4 -4h4" />
                                                                        </svg>
                                            
                                                                    </button>
                                                                </div>
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                    
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                    
                    
                        {% else %}
                            <div class="empty">
                                <p class="empty-title">Oopsâ€¦ It seems like there are no folders in this page. </p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
