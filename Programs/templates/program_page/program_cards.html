{% load static %}

    {% comment %} <section class="bg-light pt-4 pb-1 shadow-sm"> {% endcomment %}
    {% comment %}
    <section class=" pt-4 pb-1">
        <div class="row">
            <!-- This is the program cards. It will loop multiple times depending of the list of programs in the database-->
            {% for record in records %}
                <div class="col-lg-4 mb-3 d-flex align-items-stretch">
                    <div class="card program-card" style="width: 18rem;">
                    <!-- Card TOP BACKGROUND COLOR-->
                    <div class="card-header bg-opacity-50" style="background-color: {{ record.color_code }}">
                        <div class="row">

                            <div class="col col-lg-10">
                                <label class="h1">{{ record.abbreviation }}</label>
                            </div>

                            <div class="col col-lg-2">
                                <div class="btn-group">
                                    <button class="btn btn-ellipse" type="button" data-bs-toggle="dropdown" 
                                        data-bs-auto-close="true" aria-expanded="false" data-bs-offset="-50,2" style="color: #ffffff;">
                                        <li class="fa-solid fa-ellipsis-vertical fa-xl"></li>
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li><button class="dropdown-item" data-bs-toggle="modal" data-bs-target="#view-modal-{{ record.id }}">View</button></li>
                                        <li><button class="dropdown-item edit-button" data-bs-toggle="modal" data-bs-target="#edit-modal-{{ record.id }}"
                                            data-id={{ record.id }}
                                            data-program-name={{ record.program_name }}
                                            data-abbreviation={{ record.abbreviation }}
                                            data-color-code={{ record.color_code }}
                                            data-description={{ record.description }}>Edit</button></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li>
                                            <form method="POST" action="{% url 'program-archive' pk=record.id %}" id="archive-form-{{ record.id }}">
                                                {% csrf_token %}
                                                <button type="button" class="dropdown-item archive-button" data-id={{ record.id }}>Archive</button>
                                            </form>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                        </div>
                
                        <div>
                            <p >{{ record.program_name }}</p>
                        </div>
                    </div>
                
                    <div class="card-body clickable-card " data-record-id="{{ record.id }}">
                        <small class="h5 small" >Created by: </small><small>Francis Candelaria <small class="text-muted">(Admin I)</small></small><br>
                        <small class="h5 small" >Date created: </small><small>Aug 23, 2023</small><br>
                        <small class="h5 small" >Modify by: </small><small>Jonel Malinao <small class="text-muted">(Admin III)</small></small><br>
                        <small class="h5 small" >Modified date: </small><small>Sept 03, 2023</small><br>
                    </div>
                
                    </div>
                </div>
              

                {% include "program_page/view_modal.html" %}
                {% include "program_page/edit_modal.html" %}

            {% endfor %}

        </div>
    </section>    
    {% include "program_page/scripts.html" %} 
    {% comment %} {% include "program_page/styles.html" %}  {% endcomment %}



    <div class="py-5" style="margin-top: 20px; margin-bottom: 50px;">
        <div class="container">
            <div class="row hidden-md-up">
    
                <!-- For loop here -->
                {% for record, update_form, created_by, modified_by in update_forms  %}
                    <div class="col-md-4" style="margin-top: 10px; margin-bottom: 10px;">
                        <div class="ccard">
    
                            <div class="position-relative">
                                <!-- Add ellipsis button in the upper-right corner -->  
                                <button class="btn btn-sm position-absolute top-0 end-0 m-2 btn-ellipse" type="button" data-bs-toggle="dropdown" 
                                    data-bs-auto-close="true" aria-expanded="false" data-bs-offset="-50,2" style="color: #000000;">
                                    <li class="fa-solid fa-ellipsis-vertical fa-xl"></li>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><button class="dropdown-item" data-bs-toggle="modal" data-bs-target="#view-modal-{{ record.id }}">View</button></li>
                                    <li><button class="dropdown-item edit-button" data-bs-toggle="modal" data-bs-target="#edit-modal-{{ record.id }}">Edit</button></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li>                              
                                                            
                                        <form method="POST" action="{% url 'programs:archive' pk=record.id %}" id="archive-form-{{ record.id }}">
                                            {% csrf_token %}
                                            <button type="button" class="dropdown-item archive-button" data-id={{ record.id }}>Archive</button>
                                        </form>
                            
                                    </li>
                                </ul>
    
                                <div class="card-block">
                                    <h1 class="c-title">{{ record.abbreviation }}</h1>
                                    <h6 class="card-subtitle text-muted">{{ record.program_name }}</h6>
                                    <hr>
                                    <small class="card-text p-y-1 text-muted">Created by: </small><small class="card-text p-y-1">{{ created_by.first_name }} {{ created_by.last_name }}</small><br>
                                    <small class="card-text p-y-1 text-muted">Date Created: </small><small class="card-text p-y-1">{{ record.created_at }}</small><br>
                                    <small class="card-text p-y-1 text-muted">Modified by: </small><small class="card-text p-y-1">{{ modified_by.first_name }} {{ modified_by.last_name }} </small><br>
                                    <small class="card-text p-y-1 text-muted">Last Modified: </small><small class="card-text p-y-1">{{ record.modified_at }}</small><br>   
                                </div>
                            </div>
                        </div>
                    </div>
    
                    {% include "program_page/view_modal.html" %}
                    {% include "program_page/edit_modal.html" %}
    
                <!-- END of For Loop -->
                {% endfor %}
    
            </div>
        </div>
    </div>
    {% include "program_page/scripts.html" %} 
    